<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>

        <!-- Subscriber-->
        <record id="subscriber_view_tree" model="ir.ui.view">
            <field name="name">Subscribers</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <tree string="subscriber">
                    <field name="name"/>
                    <field name="email"/>
                    <field name="phone" optional="hide"/>
                    <field name="mobile" optional="hide"/>
                    <field name="gender"/>
                    <field name="branch_id" optional="show" groups="aspl_fitness_management.group_multi_branches"/>
                    <field name="company_id" optional="hide"/>
                    <field name="age"/>
                </tree>
            </field>
        </record>

        <record id="view_subscriber_plan_search" model="ir.ui.view">
            <field name="name">subscriber.plan.search.view</field>
            <field name="model">subscriber.plan</field>
            <field name="arch" type="xml">
                <search string="Subscriber Plan">
                    <field name="name" filter_domain="[('name','ilike',self)]" string="Name"/>
                    <field name="subscriber_id"/>
                    <field name="branch_id" groups="aspl_fitness_management.group_multi_branches"/>
                    <filter string="Inactive" name="inactive" domain="[('active', '=', False)]"/>
                    <group expand="1" string="Group By">
                        <filter string="Subscriber" name="subscriber_id"
                                context="{'group_by':'subscriber_id'}"/>
                        <filter string="Branch" name="branch_id"
                                context="{'group_by':'branch_id'}"
                                groups="aspl_fitness_management.group_multi_branches"/>
                        <filter string="Type" name="plan_type"
                                context="{'group_by':'plan_type'}"/>
                        <filter string="State" name="state"
                                context="{'group_by':'state'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="act_res_partner_2_subscriber_plan" model="ir.actions.act_window">
            <field name="name">Subscriber Plans</field>
            <field name="res_model">subscriber.plan</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('subscriber_id','=', active_id)]</field>
            <field name="search_view_id" ref="aspl_fitness_management.view_subscriber_plan_search"/>
            <field name="context">{'search_default_plan_type': 1}</field>
        </record>

        <record id="subscriber_view_form" model="ir.ui.view">
            <field name="name">Subscribers</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <form string="subscriber">
                    <header>
                        <button name="%(aspl_fitness_management.view_membership_subscription_action)d"
                                string="Create Membership"
                                class="oe_highlight" type="action"
                                attrs="{'invisible': ['|',('membership_history_ids','!=',[]),('id','=',False)]}"
                        />
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" name="%(aspl_fitness_management.act_res_partner_2_subscriber_plan)d"
                                    type="action" icon="fa-pencil-square-o" id="button_subscriber_plans"
                                    attrs="{'invisible': [('plan_count', '=', 0)]}">
                                <field string="Plans" name="plan_count" widget="statinfo"/>
                            </button>
                            <button class="oe_stat_button"
                                    name="open_members_membership"
                                    type="object" icon="fa-user-plus"
                                    attrs="{'invisible': [('membership_history_ids', '=', [])]}">
                                <field string="Membership" name="membership_history_count" widget="statinfo"/>
                            </button>
                        </div>
                        <field name="image_1920" widget='image' class="oe_avatar"
                               style="margin-right: 45px; margin-top: 5px;"
                               options='{"zoom": true, "preview_image":"image_128"}'/>
                        <div class="oe_title" style="width: auto;">
                            <field name="name" required="1" placeholder="Name"
                                   style="height:40px; width: 72%; margin-left: 5px;
                                   margin-top: 20px;font-size:30px;"/>
                            <br/>
                            <field name="gym_subscriber" style="margin-left: 10px; margin-top: 10px;"/>
                            <label for="gym_subscriber" string="GYM"/>
                            <field name="nutrition_subscriber" style="margin-top: 10px; margin-left: 55px; "/>
                            <label for="nutrition_subscriber" string="Nutrition"/>
                        </div>
                        <group>
                            <group>
                                <label for="street" string="Address"/>
                                <div class="o_address_format">
                                    <field name="street" placeholder="Street..." class="o_address_street"/>
                                    <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                                    <field name="city" placeholder="City" class="o_address_city"/>
                                    <field name="state_id" class="o_address_state" placeholder="State"
                                           options='{"no_open": True}' required="1"/>
                                    <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                                    <field name="country_id" placeholder="Country" class="o_address_country"
                                           options='{"no_open": True, "no_create": True}'/>
                                </div>
                            </group>
                            <group>
                                <field name="birth_date" required="1"/>
                                <field name="age"/>
                                <field name="gender" required="1"/>
                                <field name="phone"/>
                                <field name="mobile"/>
                                <field name="email"/>
                                <field name="membership_history_ids" invisible="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="medical" string="Medical">
                                <group name="container_row_2">
                                    <group name="medical" string="Medical History"
                                           style="max-width: 500px;">
                                        <group>
                                            <field name="allergy"/>
                                            <field name="symptoms"/>
                                            <field name="diagnoses"/>
                                            <field name="medications"/>
                                        </group>
                                        <group>
                                            <field name="surgery"/>
                                            <field name="risk_factors"/>
                                            <field name="physical_activities"/>
                                        </group>
                                    </group>
                                </group>
                                <group name="row container" string="Goals">
                                    <field name="fitness_goal_ids" nolabel="1">
                                        <tree editable="bottom">
                                            <field name="fitness_goal_id" required="1"/>
                                            <field name="desc"/>
                                            <field name="duration"/>
                                            <field name="duration_type" nolabel="1" required="1"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page name="allergy" string="Allergy" attrs="{'invisible': [('allergy', '=', False)]}">
                                <field name="allergy_ids" string="Allergies">
                                    <tree editable="bottom">
                                        <field name="allergy_type_id" required="1"/>
                                        <field name="desc"/>
                                        <field name="state" required="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="symptoms" string="Symptoms" attrs="{'invisible': [('symptoms', '=', False)]}">
                                <field name="symptoms_ids">
                                    <tree editable="bottom" string="Symptoms">
                                        <field name="symptom_id" required="1"/>
                                        <field name="desc"/>
                                        <field name="state" required="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="diagnoses" string="Diagnoses"
                                  attrs="{'invisible': [('diagnoses', '=', False)]}">
                                <field name="diagnose_ids">
                                    <tree editable="bottom">
                                        <field name="diagnose_id" required="1"/>
                                        <field name="desc"/>
                                        <field name="state" required="1"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="surgeries" string="Surgeries" attrs="{'invisible': [('surgery', '=', False)]}">
                                <field name="surgery_ids">
                                    <tree string="Surgeries">
                                        <field name="date"/>
                                        <field name="surgery_id"/>
                                        <field name="desc"/>
                                        <field name="state"/>
                                    </tree>
                                    <form string="Surgery">
                                        <header>
                                            <field name="state" widget="statusbar"/>
                                        </header>
                                        <group>
                                            <group>
                                                <field name="surgery_id" required="1"/>
                                                <field name="desc"/>
                                            </group>
                                            <group>
                                                <field name="date" required="1"/>
                                                <field name="surgen_name"/>
                                            </group>
                                        </group>
                                        <div string="Instructions">
                                            <label for="instruction"/>
                                            <field name="instruction" help="Any specific instruction to follow"
                                                   style="height: 60px; margin-top: 10px;"/>
                                        </div>
                                    </form>
                                </field>
                            </page>
                            <page name="physical_activities" string="Physical Activities"
                                  attrs="{'invisible': [('physical_activities', '=', False)]}">
                                <field name="physical_activity_ids">
                                    <tree editable="bottom">
                                        <field name="activity_id" required="1"/>
                                        <field name="desc"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="medications" string="Medications"
                                  attrs="{'invisible': [('medications', '=', False)]}">
                                <field name="medication_ids">
                                    <tree string="Medications">
                                        <field name="type_id"/>
                                        <field name="desc"/>
                                        <field name="state"/>
                                    </tree>
                                    <form string="Medication">
                                        <group>
                                            <group>
                                                <field name="type_id" required="1"/>
                                                <field name="desc"/>
                                            </group>
                                            <group>
                                                <field name="reason"/>
                                                <field name="dosage"/>
                                                <field name="state"/>
                                            </group>
                                        </group>
                                    </form>
                                </field>
                            </page>
                            <page name="risk_factors" string="Risk Factor"
                                  attrs="{'invisible': [('risk_factors', '=', False)]}">
                                <field name="risk_factor_ids">
                                    <tree editable="bottom">
                                        <field name="type_id" required="1"/>
                                        <field name="desc"/>
                                        <field name="risk_level"/>
                                    </tree>
                                </field>
                            </page>
                            <page name="others" string="Other Info">
                                <group name="container_row_2">
                                    <group name="misc" string="Misc" style="max-width: 500px;">
                                        <field name="company_id" groups="base.group_multi_company"
                                               required="1" options="{'no_open': True, 'no_create': True}"/>
                                        <field name="branch_id" options="{'no_open': True, 'no_create': True}"
                                               groups="aspl_fitness_management.group_multi_branches"/>

                                    </group>
                                    <group name="sale" string="Sales" style="margin-left: 65px; max-width: 500px;">
                                        <field name="pricelist_id"/>
                                    </group>
                                </group>
                            </page>
                            <page name="weight_history" string="Weight History">
                                <field name="weight_history_ids"
                                       string="Weight History">
                                    <tree editable="bottom">
                                        <field name="date" required="1"/>
                                        <field name="weight" required="1"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="subscriber_view_search" model="ir.ui.view">
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <search string="Subscribers">
                    <field name="name"/>
                    <filter string="Gym Subscriber" name="gym_subscriber" domain="[('gym_subscriber','=','True')]"/>
                    <filter string="Nutrition Subscriber" name="nutrition_subscriber"
                            domain="[('nutrition_subscriber','=','True')]"/>
                    <separator/>
                    <filter string="Allergy" name="allergy" domain="[('allergy','=',True)]"/>
                    <filter string="Symptoms" name="symptoms" domain="[('symptoms','=',True)]"/>
                    <filter string="Diagnoses" name="diagnoses" domain="[('diagnoses','=',True)]"/>
                    <filter string="Surgery" name="surgery" domain="[('surgery','=',True)]"/>
                    <filter string="Physical Activities" name="physical_activities"
                            domain="[('physical_activities','=',True)]"/>
                    <filter string="Medications" name="medications" domain="[('medications','=',True)]"/>
                    <filter string="Risk Factor" name="risk_factors" domain="[('risk_factors','=',True)]"/>
                    <separator/>
                    <group expand="1" string="Group By">
                        <filter string="Branch" name="branch_id"
                                context="{'group_by':'branch_id'}"
                                groups="aspl_fitness_management.group_multi_branches"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="subscriber_kanban_view" model="ir.ui.view">
            <field name="name">subscriber.kanban.view</field>
            <field name="model">res.partner</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="id"/>
                    <field name="image_1920"/>
                    <field name="is_company"/>
                    <field name="gym_subscriber"/>
                    <field name="nutrition_subscriber"/>
                    <field name="type"/>
                    <field name="parent_id"/>
                    <field name="name"/>
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="zip"/>
                    <field name="city"/>
                    <field name="state_id"/>
                    <field name="country_id"/>
                    <field name="branch_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_global_click o_kanban_record_has_image_fill o_res_partner_kanban">
                                <img alt="Avatar" t-att-src="kanban_image('res.partner', 'image_1920', record.id.value)"
                                     class="oe_kanban_picture"
                                     options="{'placeholder': '/base/static/img/avatar_grey.png'}" widget="image"
                                     style="max-height: 120px; max-width: 150px;"/>
                                <div class="oe_kanban_details" style="margin-left: 5px;">
                                    <div class="o_kanban_record_top">
                                        <div class="o_kanban_record_headings">
                                            <strong style="margin-left: 12px;">
                                                <field name="name"/>
                                            </strong>
                                        </div>
                                    </div>
                                    <ul>
                                        <li class="mb4" t-if="record.gym_subscriber.raw_value and
                                                              record.nutrition_subscriber.raw_value"
                                            style="margin-left: 12px; font-size: smaller;">
                                            <i class="fa fa-circle" role="img" aria-label="Gym"
                                               title="Gym" style="color: gray;">
                                                Gym
                                            </i>
                                            <i class="fa fa-circle" role="img" aria-label="Nutrition"
                                               title="Nutrition" style="margin-left: inherit; color: gray;">
                                                Nutrition
                                            </i>
                                        </li>
                                        <li class="mb4" t-if="record.gym_subscriber.raw_value and
                                                              !record.nutrition_subscriber.raw_value"
                                            style="margin-left: 12px; font-size: smaller;">
                                            <i class="fa fa-circle" role="img" aria-label="Gym" title="Gym"
                                               style="color: gray;">
                                                Gym
                                            </i>
                                        </li>
                                        <li class="mb4" t-if="!record.gym_subscriber.raw_value and
                                                              record.nutrition_subscriber.raw_value"
                                            style="margin-left: 12px; font-size: smaller;">
                                            <i class="fa fa-circle" role="img" aria-label="Nutrition" title="Nutrition"
                                               style="color: gray;">
                                                Nutrition
                                            </i>
                                        </li>
                                    </ul>
                                    <ul style="margin-left: 12px;">
                                        <li>
                                            <li t-if="record.city.raw_value and !record.country_id.raw_value">
                                                <field name="city"/>
                                            </li>
                                            <li t-if="!record.city.raw_value and record.country_id.raw_value">
                                                <field name="country_id"/>
                                            </li>
                                            <li t-if="record.city.raw_value and record.country_id.raw_value"><field
                                                    name="city"/>,
                                                <field name="country_id"/>
                                            </li>
                                            <li t-if="record.email.raw_value" class="o_text_overflow">
                                                <field name="email"/>
                                            </li>
                                            <li t-if="record.mobile.raw_value">
                                                <field name="mobile"/>
                                            </li>
                                            <li t-if="record.branch_id.raw_value">
                                                <field name="branch_id"/>
                                            </li>
                                        </li>
                                    </ul>
                                    <div t-if="record.gym_plan_count.raw_value > 0" class="row">
                                        <div class="col-9">
                                            <br/>
                                            <a class="oe_kanban_stock_picking_type_list"
                                               name="get_action_subscriber_plan_tree"
                                               type="object" style="margin-left: 12px; font-size: 11px;">
                                                Gym Plans
                                            </a>
                                        </div>
                                        <div class="col-3" style="font-size: 11px; margin-top: 4px;">
                                            <br/>
                                            <field name="gym_plan_count"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="action_subscriber" model="ir.actions.act_window">
            <field name="name">Members</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="domain">['|',('gym_subscriber', '=', True),('nutrition_subscriber','=',True)]</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'kanban', 'view_id': ref('subscriber_kanban_view')}),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('subscriber_view_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('subscriber_view_form')}),
                ]"
            />
            <field name="search_view_id" ref="subscriber_view_search"/>
            <field name="context">{'fitness_subscribers': True}</field>
        </record>

        <menuitem id="fitness_sub_menu_subscribers"
                  name="Members"
                  sequence="1"
                  parent="fitness_menu_subscribers"
                  action="action_subscriber"
        />
        <!--Allergy-->
        <record id="view_subscriber_allergy_form" model="ir.ui.view">
            <field name="name">subscriber.allergy.form.view</field>
            <field name="model">subscriber.allergy</field>
            <field name="arch" type="xml">
                <form string="Subscriber Allergy">
                    <sheet>
                        <group>
                            <group>
                                <field name="allergy_type_id" required="1"/>
                                <field name="desc"/>
                            </group>
                            <group>
                                <field name="state"/>
                            </group>
                        </group>

                    </sheet>
                </form>
            </field>
        </record>

        <!--Symptoms-->
        <record id="view_subscriber_medical_symptom_form" model="ir.ui.view">
            <field name="name">subscriber.medical.symptom.form.view</field>
            <field name="model">subscriber.medical.symptom</field>
            <field name="arch" type="xml">
                <form string="Subscriber Symptom">
                    <sheet>
                        <group>
                            <group>
                                <field name="symptom_id" required="1"/>
                                <field name="desc"/>
                            </group>
                            <group>
                                <field name="state"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Diagnose-->
        <record id="view_subscriber_medical_diagnose_form" model="ir.ui.view">
            <field name="name">subscriber.medical.diagnose.form.view</field>
            <field name="model">subscriber.medical.diagnose</field>
            <field name="arch" type="xml">
                <form string="Subscriber Diagnoses">
                    <sheet>
                        <group>
                            <group>
                                <field name="diagnose_id" required="1"/>
                                <field name="desc"/>
                            </group>
                            <group>
                                <field name="state"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Medication-->
        <record id="view_subscriber_medication_form" model="ir.ui.view">
            <field name="name">subscriber.medication.form.view</field>
            <field name="model">subscriber.medication</field>
            <field name="arch" type="xml">
                <form string="Subscriber Medication">
                    <sheet>
                        <group>
                            <group>
                                <field name="type_id" required="1"/>
                                <field name="desc"/>
                                <field name="reason"/>
                            </group>
                            <group>
                                <field name="dosage"/>
                                <field name="state"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Surgery-->
        <record id="view_subscriber_medical_surgery_form" model="ir.ui.view">
            <field name="name">subscriber.medical.surgery.form.view</field>
            <field name="model">subscriber.medical.surgery</field>
            <field name="arch" type="xml">
                <form string="Subscriber Surgery">
                    <sheet>
                        <group>
                            <group>
                                <field name="surgery_id" required="1"/>
                                <field name="surgen_name" required="1"/>
                                <field name="instruction"/>
                            </group>
                            <group>
                                <field name="desc"/>
                                <field name="date"/>
                                <field name="state"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Risk Factor-->
        <record id="view_subscriber_risk_factor_form" model="ir.ui.view">
            <field name="name">subscriber.risk.factor.form.view</field>
            <field name="model">subscriber.risk.factor</field>
            <field name="arch" type="xml">
                <form string="Risk Factor">
                    <sheet>
                        <group>
                            <group>
                                <field name="type_id" required="1"/>
                                <field name="desc"/>
                            </group>
                            <group>
                                <field name="risk_level"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Physicl Activities-->
        <record id="view_subscriber_physical_activity_form" model="ir.ui.view">
            <field name="name">subscriber.physical.activity.form.view</field>
            <field name="model">subscriber.physical.activity</field>
            <field name="arch" type="xml">
                <form string="Physical Activity">
                    <sheet>
                        <group>
                            <group>
                                <field name="activity_id" required="1"/>
                            </group>
                            <group>
                                <field name="desc"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--Fitness Goal-->
        <record id="view_subscriber_fitness_goal_form" model="ir.ui.view">
            <field name="name">subscriber.fitness.goal.form.view</field>
            <field name="model">subscriber.fitness.goal</field>
            <field name="arch" type="xml">
                <form string="Subscriber Fitness Goal">
                    <sheet>
                        <group>
                            <group>
                                <field name="fitness_goal_id" required="1"/>
                                <field name="desc"/>
                                <field name="state"/>
                            </group>
                            <group>
                                <field name="duration"/>
                                <field name="duration_type"/>
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--        Subscriber Plan-->
        <record id="view_subscriber_plan_tree" model="ir.ui.view">
            <field name="name">subscriber.plan.tree.view</field>
            <field name="model">subscriber.plan</field>
            <field name="arch" type="xml">
                <tree string="Subscriber Plan">
                    <field name="name" string="Number"/>
                    <field name="subscriber_id"/>
                    <field name="joining_date" optional="show" string="From"/>
                    <field name="ending_date" optional="show" string="To"/>
                    <field name="plan_fees" optional="hide"/>
                    <field name="state"/>
                    <field name="branch_id" optional="hide"/>
                </tree>
            </field>
        </record>

        <record id="act_nutrition_subscriber_plan_2_invoice" model="ir.actions.act_window">
            <field name="name">Invoices</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="account.view_move_form"/>
        </record>

        <record id="view_subscriber_plan_form" model="ir.ui.view">
            <field name="name">subscriber.plan.form.view</field>
            <field name="model">subscriber.plan</field>
            <field name="arch" type="xml">
                <form string="Subscriber Plan">
                    <header>
                        <field name="state" widget="statusbar"/>
                        <button name="create_plan_invoice" string="Confirm" class="oe_highlight"
                                type="object"
                                attrs="{'invisible': ['|', ('id', '=', False), ('state', '!=', 'draft')]}"/>
                        <button name="add_nutrition_invoice" string="Add Nutrition Invoice" class="oe_highlight"
                                type="object"
                                attrs="{'invisible': ['|', '|', ('id', '=', False), ('state', 'in', ['draft', 'cancel']),
                                 ('nutrition_invoice', '=', False)]}"/>
                        <button name="validate_invoice_and_plan" string="Validate" class="oe_highlight"
                                type="object"
                                attrs="{'invisible': ['|',('state', 'in', ['paid', 'cancelled', 'validated', 'draft']),
                                                          ('id', '=', False)]}"/>
                        <button name="action_register_gym_payment" string="Register Payment" class="oe_highlight"
                                type="object" attrs="{'invisible': [('state', 'not in', ['validated'])]}"/>
                        <button name="action_sent_invoice" string="Sent Invoice" class="oe_highlight" type="object"
                                attrs="{'invisible': [('invoice_ids', '=', [])]}"/>
                        <button name="enable_nutrition_plan" class="oe_highlight" type="object"
                                string="Add Nutrition Plan" groups="aspl_fitness_management.nutrition_security_group"
                                attrs="{'invisible': ['|', ('plan_type', '!=', 'gym'), ('id','=',False)]}"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="view_subscriber_plan_invoices" type="object" string="Invoices"
                                    class="oe_stat_button" icon="fa-pencil-square-o"
                                    attrs="{'invisible': [('invoice_ids', '=', [])]}"/>
                        </div>
                        <div class="oe_title">
                            <h1>
                                <field name="name" readonly="1"/>
                            </h1>
                        </div>
                        <group>
                            <group>
                                <field name="subscriber_id" required="1"
                                       domain="['|', ('gym_subscriber', '=', True),
                                       ('nutrition_subscriber', '=', True)]"
                                       context="{'form_view_ref': 'aspl_fitness_management.subscriber_view_form'}"/>
                                <label for="joining_date" string="Duration"/>
                                <div class="row">
                                    <field name="joining_date"
                                           style="margin-left: 16px; margin-right: 3px; max-width: 175px;"
                                           class="oe_inline" placeholder="from"/>
                                    -
                                    <field name="ending_date"
                                           style="margin-left: 3px; max-width: 175px;"
                                           class="oe_inline" placeholder="to"/>
                                </div>
                                <label for="start_time" string="Timing"
                                       attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}"/>
                                <div attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}" class="row">
                                    <field name="start_time" widget="float_time"
                                           style="margin-left: 16px; margin-right: 3px; max-width: 120px;"
                                           attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}"
                                           class="oe_inline"/>
                                    -
                                    <field name="end_time" widget="float_time"
                                           style="margin-left: 3px; max-width: 120px;"
                                           attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}"
                                           class="oe_inline"/>
                                </div>
                                <field name="meal_ids" widget="many2many_tags"
                                       attrs="{'invisible': [('plan_type', 'not in', ['nutrition', 'both'])],
                                               'required': [('plan_type', 'in', ['nutrition', 'both'])]}"/>
                                <field name="plan_type" invisible="1"/>
                                <field name="nutrition_invoice" invisible="1"/>
                                <field name="invoice_ids" invisible="1"/>
                            </group>
                            <group>
                                <field name="gym_plan_id" attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])],
                                                                  'required': [('plan_type', 'in', ['gym', 'both'])]}"/>
                                <field name="branch_id"
                                       groups="aspl_fitness_management.group_multi_branches"/>
                                <field name="branch_time_range_id" string="Batch"
                                       attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}"
                                       context="{'plan_id': gym_plan_id}" options="{'no_create':True}"/>
<!--                                attrs="{'readonly': [('plan_type', '=', 'gym')]}"-->
                                <field name="payment_term_id"/>
                                <field name="pricelist_id"
                                       attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}"/>
                                <field name="active" invisible="1"/>
                            </group>
                        </group>
                        <notebook>
                            <page name="service_line_ids" string="Services"
                                  attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}">
                                <field name="service_line_ids" context="{'default_pricelist_id': pricelist_id}">
                                    <tree editable="bottom">
                                        <field name="service_id" required="1"/>
                                        <field name="description"/>
                                        <field name="with_trainer"/>
                                        <field name="fees"/>
                                    </tree>
                                </field>
                            </page>

                            <page name="schedule_ids" string="Gym Schedules"
                                  attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}">
                                <group>
                                    <button name="action_update_schedule"
                                            string="Update Schedule" class="oe_highlight"
                                            type="object"
                                            attrs="{'invisible': ['|', '|', ('state', '!=', 'paid'), ('schedule_ids', '!=', []), ('nutrition_line_ids', '!=', [])]}"/>
                                </group>
                                <field name="schedule_ids">
                                    <tree create="0" editable="bottom">
                                        <field name="day"/>
                                        <field name="line_ids" widget="many2many_tags"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="day"/>
                                            </group>
                                        </group>
                                        <notebook>
                                            <page string="Exercise Details">
                                                <field name="line_ids">
                                                    <tree editable="bottom">
                                                        <field name="exercise_id"/>
                                                        <field name="count"/>
                                                        <field name="uom_id"/>
                                                    </tree>
                                                    <form>
                                                        <group>
                                                            <group>
                                                                <field name="exercise_id"/>
                                                                <field name="count"/>
                                                            </group>
                                                            <group>
                                                                <field name="uom_id"/>
                                                            </group>
                                                        </group>
                                                    </form>
                                                </field>
                                            </page>
                                        </notebook>
                                    </form>
                                </field>
                            </page>
                            <page name="nutrition_line_ids" string="Nutrition Schedules"
                                  attrs="{'invisible': [('plan_type', 'not in', ['nutrition', 'both'])]}">
                                <field name="nutrition_line_ids">
                                    <tree limit="8">
                                        <field name="day"/>
                                        <field name="meal_ids" widget="many2many_tags"/>
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="day"/>
                                            </group>
                                        </group>
                                        <notebook>
                                            <page string="Meals">
                                                <field name="meal_ids">
                                                    <tree editable="bottom">
                                                        <field name="order"/>
                                                        <field name="name"/>
                                                        <field name="meal_time" widget="float_time"/>
                                                    </tree>
                                                </field>
                                            </page>
                                        </notebook>
                                    </form>
                                </field>
                            </page>
                        </notebook>
                        <group class="oe_subtotal_footer oe_right" readonly="1"
                               attrs="{'invisible': [('plan_type', 'not in', ['gym', 'both'])]}">
                            <field name="plan_fees" string="Gym Fees" readonly="1"/>
                            <field name="nutrition_fees" string="Nutrition Fees"
                                   attrs="{'invisible': [('plan_type', '!=', 'both')]}"/>
                            <div class="oe_subtotal_footer_separator oe_inline">
                                <label for="fees_total" string="Total"/>
                            </div>
                            <field name="fees_total" nolabel="1" class="oe_subtotal_footer_separator"
                                   widget="monetary" readonly="1"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="subscriber_plan_view_calendar" model="ir.ui.view">
            <field name="name">subscriber.plan.calendar.view</field>
            <field name="model">subscriber.plan</field>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="joining_date" date_stop="ending_date" color="name"
                          hide_time="true" event_limit="5" create="false">
                    <field name="name" filters="1"/>
                    <field name="start_time"/>
                    <field name="end_time"/>
                    <field name="gym_plan_id"/>
                </calendar>
            </field>
        </record>

        <record id="action_subscriber_plan" model="ir.actions.act_window">
            <field name="name">Subscriber Plan</field>
            <field name="res_model">subscriber.plan</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_subscriber_plan_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_subscriber_plan_form')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('subscriber_plan_view_calendar')}),
                ]"/>
            <field name="context">{'default_plan_type': 'nutrition'}</field>
            <field name="domain">[('plan_type', 'in', ['nutrition', 'both'])]</field>
        </record>

        <menuitem action="action_subscriber_plan"
                  id="menu_action_subscriber_plan"
                  sequence="7"
                  parent="fitness_menu_nutrition"/>

        <record id="action_subscriber_gym_plan" model="ir.actions.act_window">
            <field name="name">Subscriber Plan</field>
            <field name="res_model">subscriber.plan</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('view_subscriber_plan_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('view_subscriber_plan_form')}),
                (0, 0, {'view_mode': 'calendar', 'view_id': ref('subscriber_plan_view_calendar')}),
                ]"/>
            <field name="context">{'default_plan_type': 'gym'}</field>
            <field name="domain">[('plan_type', 'in', ['gym', 'both'])]</field>
        </record>

        <menuitem action="action_subscriber_gym_plan"
                  id="menu_action_subscriber_gym_plan"
                  sequence="4"
                  parent="fitness_menu_gym"/>



        <record id="physical_activity_tree_view" model="ir.ui.view">
            <field name="name">physical.activity.tree.view</field>
            <field name="model">physical.activity</field>
            <field name="arch" type="xml">
                <tree string="Physical Activity" editable="top">
                    <field name="name" required="1"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record id="action_physical_activity" model="ir.actions.act_window">
            <field name="name">Physical Activity</field>
            <field name="res_model">physical.activity</field>
            <field name="view_mode">tree</field>
        </record>

        <menuitem id="menu_action_config_fitness"
                  sequence="3"
                  name="Fitness"
                  parent="fitness_menu_Configuration"
        />

        <menuitem id="menu_action_physical_activity"
                  action="action_physical_activity"
                  sequence="1"
                  parent="menu_action_config_fitness"
        />

        <record id="risk_factor_type_tree_view" model="ir.ui.view">
            <field name="name">risk.factor.type.tree.view</field>
            <field name="model">risk.factor.type</field>
            <field name="arch" type="xml">
                <tree string="Risk Factor Type" editable="top">
                    <field name="name" required="1"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record id="action_risk_factor_type" model="ir.actions.act_window">
            <field name="name">Risk Factor Type</field>
            <field name="res_model">risk.factor.type</field>
            <field name="view_mode">tree</field>
        </record>

        <menuitem id="menu_action_risk_factor_type"
                  action="action_risk_factor_type"
                  sequence="2"
                  parent="menu_action_config_fitness"
        />

        <record id="fitness_goal_tree_view" model="ir.ui.view">
            <field name="name">fitness.goal.tree.view</field>
            <field name="model">fitness.goal</field>
            <field name="arch" type="xml">
                <tree string="Goal" editable="top">
                    <field name="name" required="1"/>
                    <field name="desc"/>
                </tree>
            </field>
        </record>

        <record id="action_fitness_goal" model="ir.actions.act_window">
            <field name="name">Goal</field>
            <field name="res_model">fitness.goal</field>
            <field name="view_mode">tree</field>
        </record>

        <menuitem id="menu_action_fitness_goal"
                  action="action_fitness_goal"
                  sequence="3"
                  parent="menu_action_config_fitness"
        />

        <record id="action_subscriber_to_subscriber_plan" model="ir.actions.act_window">
            <field name="name">Gym Plans</field>
            <field name="res_model">subscriber.plan</field>
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</odoo>